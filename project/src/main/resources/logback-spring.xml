<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>logs/application.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
        <fileNamePattern>logs/application.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
        <maxFileSize>100MB</maxFileSize>
        <maxHistory>30</maxHistory>
        <totalSizeCap>1GB</totalSizeCap>
    </rollingPolicy>
    <encoder class="net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder">
        <providers>
            <timestamp/>
            <logLevel/>
            <loggerName/>
            <message/>
            <mdc/>
            <arguments/>
            <stackTrace/>
            <pattern>
                <pattern>
                    {
                        "application": "crud-app",
                        "environment": "${ENVIRONMENT:-development}",
                        "host": "${HOSTNAME:-localhost}",
                        "version": "${APP_VERSION:-1.0.0}"
                    }
                </pattern>
            </pattern>
        </providers>
    </encoder>
</appender>
