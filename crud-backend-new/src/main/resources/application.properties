# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
server.port=${PORT:8080}
server.address=${HOST:0.0.0.0}

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
spring.datasource.url=jdbc:mysql://${DB_HOST:localhost}:3306/${DB_NAME:crud_db}?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
spring.datasource.username=${DB_USER:root}
spring.datasource.password=${DB_PASSWORD:password}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
spring.jpa.properties.hibernate.format_sql=true

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.ssl.enabled=${REDIS_SSL:true}
spring.data.redis.timeout=10000ms

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
app.allowed-origin=${ALLOWED_ORIGIN:}

# ============================================================================
# MONITORING & OBSERVABILITY CONFIGURATION (NEW)
# ============================================================================

# OpenTelemetry Configuration
otel.service.name=${OTEL_SERVICE_NAME:crud-app}
otel.traces.exporter=${OTEL_TRACES_EXPORTER:logging}  # Options: logging, otlp, none
otel.metrics.exporter=${OTEL_METRICS_EXPORTER:prometheus}  # Options: prometheus, otlp, none
otel.logs.exporter=${OTEL_LOGS_EXPORTER:none}  # Options: otlp, logging, none

# OTLP Exporter Configuration (if using OTLP)
otel.exporter.otlp.endpoint=${OTEL_EXPORTER_OTLP_ENDPOINT:http://localhost:4317}
otel.exporter.otlp.headers=${OTEL_EXPORTER_OTLP_HEADERS:}
otel.exporter.otlp.timeout=${OTEL_EXPORTER_OTLP_TIMEOUT:10000}

# Spring Boot Actuator for Monitoring
management.endpoints.web.exposure.include=health,info,metrics,prometheus,loggers
management.endpoint.health.show-details=when-authorized
management.endpoint.prometheus.enabled=true

# Metrics Configuration
management.metrics.export.prometheus.enabled=true
management.metrics.tags.application=crud-app
management.metrics.distribution.percentiles-histogram.http.server.requests=true
management.metrics.distribution.sla.http.server.requests=100ms,500ms,1s,2s

# Custom Metrics
management.metrics.enable.jvm=true
management.metrics.enable.logback=true
management.metrics.enable.redis=true
management.metrics.enable.jdbc=true

# ============================================================================
# LOGGING CONFIGURATION (ENHANCED)
# ============================================================================
logging.level.com.example.crudapp=INFO
logging.level.org.springframework.data.redis=${REDIS_LOG_LEVEL:WARN}
logging.level.org.springframework.web=WARN
logging.level.org.hibernate=WARN
logging.level.io.opentelemetry=INFO

# Enhanced Logging Patterns with Trace IDs
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - [traceId=%X{traceId:-}, spanId=%X{spanId:-}] - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - [traceId=%X{traceId:-}, spanId=%X{spanId:-}] - %msg%n

# Optional: JSON Logging for better parsing
# logging.pattern.console={"timestamp":"%d{yyyy-MM-dd HH:mm:ss.SSS}", "level":"%level", "thread":"%thread", "logger":"%logger", "message":"%msg", "traceId":"%X{traceId:-}", "spanId":"%X{spanId:-}"}%n

# Log file configuration (optional)
logging.file.name=/var/log/crud-app.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30

# ============================================================================
# APPLICATION SPECIFIC METRICS (NEW)
# ============================================================================
app.metrics.enabled=true
app.metrics.cache.enabled=true
app.metrics.database.enabled=true

# ============================================================================
# HEALTH CHECK CONFIGURATION (ENHANCED)
# ============================================================================
management.health.redis.enabled=true
management.health.db.enabled=true
management.health.diskspace.enabled=true
management.endpoint.health.probes.enabled=true